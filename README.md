# C++ UNITY 게임개발


**1. 게임의 개요**

![1](https://user-images.githubusercontent.com/105213482/224279254-6fa94b6b-94a3-464b-ab1c-841f6fa59238.png)

<br>
  본 작품은 앞서 기술했 듯 Unity 3D를 활용한 던전 탐험 형식 스토리 텔링 게임이다. 미로형식으로 이루어진 환경에서 플레이어가 알맞은 선택을 통해 엔딩을 보는게 목적이다. 개발 플랫폼은 PC로 PC에서만 이용가능하다. 작품의 제목은 'LONELY B' 이고 제목으로 알 수 있 듯 플레이어 이름은 B 이다
<br><br><br>

![2](https://user-images.githubusercontent.com/105213482/224280115-d54af6fc-21e0-40d0-ba32-89b89120187a.png)



 <플레이어를 방해하는 적>         <플레이어(주인공 B)>
 
 <br><br><br>
 
 ![3](https://user-images.githubusercontent.com/105213482/224280118-928bc327-0390-43dc-a501-19fecafe5751.png)
 
 
        <플레이어에게 도움이 되는 아이템들>

<br><br><br>

**2. 주요코드**
  
  애니메이션을 구성하는 애니메이터와 C# 스크립트를 구분해서 기술하려고 한다.
설명에 앞서 플레이어 및 적들의 몸체 및 애니메이션 구성은 앞서 기술한 에셋 스토어에서 다운받은 것들임을 명시한다.

<br><br><br>
(1) 애니메이터
<br>

![4](https://user-images.githubusercontent.com/105213482/224280122-bd3e8d1e-95b2-4dd2-ba66-770cabe4e619.png)

<br>
      <플레이어의 애니메이터>

<br><br>


  위 그림을 보면 Idle Walk Run 의 블록이 있는데 해당 블록들은 기본상태(가만히 있는 모션) 걷기 뛰기의 애니메이션을 의미한다. 화살표를 보면 서로 양방향으로 연결되어 있는데 이는 사람이 걷다가 멈출 수 도 있고 갑자기 뛸 수도 있음을 표현한 것이며 이는 언제든지 3가지 상태가 될 수 있다는 것을 뜻한다. 블록을 눌러보면 애니메이션이 어떻게 설정되어 있는지 확인할 수 있다.

<br><br>
  
  ![5](https://user-images.githubusercontent.com/105213482/224280124-e6911969-39bb-47bf-a7cd-d0c567b26713.png)
  


     <기본상태(Idle) 애니메이션>
      
<br>

![6](https://user-images.githubusercontent.com/105213482/224280130-0ee0d1dd-5bb5-4c56-a3d3-a353098ccd35.png)


     <플레이어의 또 다른 애니메이터>
      
<br>      
  게임에서 플레이어는 걷고 뛰기만 하지 않는다. 공격도 하고 총을 쏘기도 하며 공격을 회피하기도 점프하기도 가능해야 한다. 그림에서 맨 위의 AnyState는 플레이어가 어떤 상태이든 상관없이 접근이 가능하게 한다. 예를 들자면 어느 상태에서든지 죽을 수 도 있는 것처럼 말이다. 이와 다르게 Exit은 상태가 끝난다는 의미다. Anystate를 살펴보면 2번째 줄 블록인 Die Swap Swing Shot Reload , 3번째 블록인 Dodge와 Jump에 연결되어 있다. 어떤 상태에서든 죽거나 무기를 교체하거나 점프하거나 하는 애니메이션이 출력 될 수 있다는 뜻 이다. 하지만 점프하는 모션과 총을 쏘는 모션은 동시에 존재 할 수 없기 때문에 연결되어 있지 않은 것을 알 수 있다. 그와 다르게 Jump 와 Land(착지)는 연결되어 있는데 그 이유는 점프와 착지모션이 하나의 이어지는 동작이기 때문이라고 생각하면 된다. 위에 기술한바와 같이 각 블록마다 해당되는 애니메이션은 따로 설정되어 있다.




(2) C#스크립트

  이전에 기술하였듯 Unity는 C# 스크립트를 통한 개발을 하는데 개발자라면 어느 정도 코드 및 코딩의 개념에 익숙할 것이지만 그 외의 사람들에게는 약간 생소할 수 있다는 점이 모르는 사람도 쉽게 다룰 수 있는 애니메이터와 다른 점이다.
<br><br>
![7](https://user-images.githubusercontent.com/105213482/224284640-eeb28888-8384-48b8-8356-6277b7e74c35.png)
<br>
![8](https://user-images.githubusercontent.com/105213482/224284645-59002df2-643d-4d93-9f10-dd5c109d7f2d.png)
<br><br>

  애니메이터는 말 그대로 해당하는 애니메이션 및 동작들을 설정했던 것이지만 C# 스크립트는 코딩을 통해 좀 더 내부적인 동작들을 설정하는 것이다. 예를 들면 보스의 특수 행동을 어느 시점에 하는지와 체력 등에 대한 설정, 총알이 벽에 부딪히면 없어지는 등을 설정하는 것이다. 
<br><br>
  위 그림의 Jump()를 통해 스크립트들이 어떤 형식으로 이루어지는 단편적으로 알아보려 한다. 먼저 Jump 함수의 구성이다.

![9](https://user-images.githubusercontent.com/105213482/224284648-c0c6b72c-2ee0-4af1-98aa-9d795e940326.png)
<br><br>
  해당 코드의 조건문을 살펴보면 Jump는 jDown 점프키가 눌렸을 때 Vector3.zero Z축이 0이면 다시말해 바닥에 플레이어가 붙어있으면 실행된다. 또한 플레이어가 점프중(isJump) 이거나 회피중(isDodge) 이거나 무기교체중(isSwap) 이거나 죽은상태(isDead) 가 아니어야(! = not) 점프가 실행된다. 실행된다면 플레이어를 힘 모드는 즉발이고 15만큼 Z축으로 올라가게 하며 플레이어 상태를 점프중(isJump) 으로 바꾼다. 또한 설정된 애니메이션인 doJump를 실행하도록 한다.
<br><br>
![10](https://user-images.githubusercontent.com/105213482/224284651-d951d129-e90b-4344-a7a8-8795f43d94c6.png)
<br><br>
  앞서 기술한 jDown은 GetButtonDown함수를 이용해 해당하는 키가 눌렸을 때 실행되도록 설정할 수 있다. 물론 다른 키들도 이곳에서 설정해서 활용하는 것이다. 이 함수는 Player.cs 스크립트 안에 포함 되어있으며 플레이어에 관련한 것들은 이 스크립트 안에 포함되어 있다.

<br><br>
